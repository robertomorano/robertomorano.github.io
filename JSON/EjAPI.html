<!<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src=https://code.jquery.com/jquery-3.7.1.min.js></script>
</head>
<body>
	<div class="container text-center">
		<h3 class="mb-4">Consulta de IP</h3>
		<div class="mb-3">
			<label for="IP" class="form-label">Ingresa tu IP:</label>
			<input type="text" id="IP" class="form-control" placeholder="Introduce tu IP">
		</div>
		<button type="button" id="solicitud" class="btn btn-primary">Enviar Solicitud</button>
	
		<div id="resultado" class="mt-4 d-none">
			<h4 id="nombrePais"></h4>
			<p><strong>Capital:</strong> <span id="capital"></span></p>
			<div id="bandera"></div>
		</div>
	</div>
</body>
<script>

	function construir(data){
		const div = document.querySelector("#texto");
		const parrafo = document.createElement("p");
		const bandera = document.querySelector("#bandera");
		const pais = document.createElement("img");
		parrafo.innerText = "Tu IP: "+data.ip+ " es de "+data.capital +", "+ data.city +", "+data.continent;
		div.appendChild(parrafo);
		pais.src = data.flag.img;	
		bandera.appendChild(pais);
	}

	$("#solicitud").on("click", e =>{
		$.ajax({ 
			url: "https://ipwho.is/"+($("#IP").val()), 
			method: "GET", 
			dataType: "json", // Convierte la respuesta a objeto JSON 
			success: function(data) { //200 o 201
			console.log(data);
			construir(data);
			}, 
			error: function(xhr, status, error) { 
			console.log(`Error: ${xhr.status} - ${error}`); 
			} 
			});
		
	});
	
</script>
</html>
